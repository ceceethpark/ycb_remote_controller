# ESP32 WROOM 리모�??�로?�트 (ESP-NOW)

ESP32 WROOM 모듈???�용??ESP-NOW 기반 무선 리모�??�로?�트?�니??

## ?�� ?�로?�트 개요

???�로?�트??ESP-NOW ?�로?�콜???�용?�여 버튼 ?�력??무선?�로 ?�송?�는 리모�??�스?�입?�다.
- **?�신�?리모�?**: 버튼 ?�력??감�??�고 ESP-NOW�??�송 + TFT LCD ?�스?�레??
- **?�신�?*: ?�호�??�신?�여 ?�하???�작 ?�행
- **?�래??기반 구조**: LCD?� ?�보?��? ?�립?�인 ?�래?�로 분리

## ??주요 기능

- ?�� **12버튼 ?�력 (PCA9555 I2C)**: ?�바?�싱, 롱프?�스, ?�블?�릭 지??
- ?�� **TFT LCD ?�스?�레??*: ?�시�??�태 ?�시 (320x240 ?�상??
- ?�� **ESP-NOW 무선 ?�신**: WiFi ?�우???�이 직접 ?�신
- ?�� **배터�?모니?�링**: 배터�??�벨 ?�시
- ?�� **직�??�인 UI**: 12�?버튼 ?�태�?3??4?�로 ?�시

## ?�� ?�드?�어 구성

### 리모�?(?�신�?
- **MCU**: ESP32 WROOM
- **?�원**: VCC 3.3V
- **LCD**: SZH-EK096 (ST7789, 320x240, SPI 4??
  - CS: GPIO 5
  - DC: GPIO 4
  - RST: GPIO 15
  - MOSI: GPIO 23
  - SCLK: GPIO 18
- **?�보??*: PCA9555 I2C GPIO ?�장 (12�?버튼)
  - I2C SDA: GPIO 21
  - I2C SCL: GPIO 22
  - 주소: 0x20
  - 버튼: IOI_0 ~ IOI_11 (12??
- **?�태 LED**: GPIO 2
- **UART**: RX, TX (?�로그래�?�??�버�?

### ?�로??참고
첨�????�로?��? 참고?�여 ?�결?�세??

## ?�� ?�요 ?�항

### ?�프?�웨??
- [PlatformIO](https://platformio.org/) (권장) ?�는 Arduino IDE
- ESP32 보드 지???�키지

### ?�드?�어
- ESP32 WROOM 모듈 x 2 (?�신�? ?�신�?
- ?�시 버튼 x 4
- LED x 1 (?�태 ?�시??
- ?�??(LED?? ??330Ω)
- USB-UART 변?�기 (?�로그래밍용)

## ?? ?�작?�기

### 1. ?�로?�트 빌드

```bash
# PlatformIO ?�용 ??
pio run

# ?�는 VS Code?�서 PlatformIO ?�장 ?�용
```

### 2. ?�신�?MAC 주소 ?�인

1. `examples/receiver.cpp`�?별도??ESP32???�로??
2. ?�리??모니???�기 (115200 baud)
3. 출력?�는 MAC 주소 복사

```
?�신�?MAC 주소: XX:XX:XX:XX:XX:XX
??주소�?리모�?코드???�력?�세??
```

### 3. 리모�??�정

`src/main.cpp` ?�일?�서 ?�신�?MAC 주소�??�정:

```cpp
// ?�신�?MAC 주소 (?�제 ?�신기의 MAC 주소�?변�?
uint8_t receiverAddress[] = {0xXX, 0xXX, 0xXX, 0xXX, 0xXX, 0xXX};
```

### 4. 리모�??�로??

```bash
# PlatformIO ?�용 ??
pio run --target upload

# ?�리??모니???�기
pio device monitor
```

## ?�� ?�동 ?�리

### ESP-NOW ?�신
- **?�로?�콜**: ESP-NOW (Espressif??무선 ?�신 ?�로?�콜)
- **?�징**:
  - WiFi ?�결 불필??
  - ?�지???�신 (< 10ms)
  - ?�?�력
  - 최�? 250 바이???�이???�송
  - 최�? ?�신 거리: ??200m (?�애�??�을 ??

### ?�이??구조

```cpp
typedef struct struct_message {
  uint8_t buttonId;      // 버튼 번호 (1-4)
  uint8_t buttonState;   // 버튼 ?�태 (0: 릴리?? 1: ?�림)
  uint32_t timestamp;    // ?�?�스?�프 (?�버깅용)
} struct_message;
```

## ?�� ?�용�?

### 리모�?(?�신�?
1. ?�원 ?�결
2. LED가 깜빡?�면 준�??�료
3. 버튼 ?�르�?
4. ?�송 ?�공 ??LED 짧게 켜짐

### ?�신�?
1. ?�신�?코드 ?�로??�??�행
2. 리모�?버튼 ?�력 ?��?
3. ?�신???�이?�에 ?�라 ?�작 ?�행

## ?�� 커스?�마?�징

### 버튼 추�?
1. `main.cpp`??버튼 ?� ?�의 추�?
2. `loop()` ?�수??버튼 체크 코드 추�?
3. ?�신기에 ?�당 버튼 처리 로직 추�?

### ?�송 ?�이??변�?
1. `struct_message` 구조�??�정
2. ?�신기�? ?�신�?모두 ?�일?�게 ?�정 ?�요

### ?�력 최적??
- Deep Sleep 모드 ?�용
- 버튼 ?�터?�트 ?�용
- WiFi ?�력 관�??�정

## ?�� 문제 ?�결

### PCA9555 초기???�패
- I2C ?�결 ?�인 (SDA: GPIO 21, SCL: GPIO 22)
- ?�???�???�인 (4.7kΩ)
- PCA9555 ?�원 ?�인 (3.3V)
- I2C 주소 ?�인 (기본�? 0x20)

### ESP-NOW 초기???�패
- WiFi 모드가 ?�바르게 ?�정?�었?��? ?�인
- ESP32 보드 ?�시??

### ?�이???�송 ?�패
- ?�신�?MAC 주소가 ?�바른�? ?�인
- ??기기 �?거리가 ?�무 멀지 ?��?지 ?�인
- ?�신기�? ?�상 ?�동 중인지 ?�인

### 버튼??반응?��? ?�음
- PCA9555 I2C ?�신 ?�인
- 버튼 ?�결 ?�인 (IOI ?� - GND)
- ?�리??모니?�로 버튼 ?�력 ?�인

## ?�� 참고 ?�료

- [ESP-NOW 공식 문서](https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-reference/network/esp_now.html)
- [ESP32 Arduino Core](https://github.com/espressif/arduino-esp32)
- [PlatformIO ESP32 가?�드](https://docs.platformio.org/en/latest/platforms/espressif32.html)

## ?�� ?�이?�스

MIT License

## ?�� ?�성??

?�로?�트 ?�성?? 2025-12-09

## ?�� 버전 ?�스?�리

- v1.0.0 - 초기 릴리??
  - 4버튼 리모�?기본 기능
  - ESP-NOW ?�신
  - ?�제 ?�신�?코드

## ?�� ?�후 개선 ?�항

- [ ] 배터�??�압 모니?�링
- [ ] Deep Sleep 모드 구현
- [ ] 버튼 조합 기능
- [ ] ?�호???�신
- [ ] ?�중 ?�신�?지??
- [ ] OLED ?�스?�레??추�?
